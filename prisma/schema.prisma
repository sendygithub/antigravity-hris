generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model Employee {
  id           Int        @id @default(autoincrement())
  Name         String
  email        String   @unique
  status       String
  hiredDate    DateTime
  joinedDate   DateTime
  updatedAt    DateTime @updatedAt
  createdAt    DateTime @default(now())
  roleId       Int
  departmentId Int

  attendance    Attendance[]
  role          Role           @relation(fields: [roleId], references: [id])
  department    Department     @relation(fields: [departmentId], references: [id])
  payroll       Payroll[]
  leaveRequests LeaveRequest[]
  tasks         Task[]
}

model Attendance {
  id         Int        @id @default(autoincrement())
  employeeId Int
  employee   Employee @relation(fields: [employeeId], references: [id])
  date       DateTime
  checkIn    DateTime?
  checkOut   DateTime?
  status     String // Present, Late, Absent, On Leave

  @@index([employeeId])
  @@index([date])
}

model Role {
  id          Int        @id @default(autoincrement())
  title       String     @unique
  description String
  permissions String
  employees   Employee[]
}

model Payroll {
  id          Int        @id @default(autoincrement())
  employeeId  Int
  employee    Employee @relation(fields: [employeeId], references: [id])
  salary      Decimal  @db.Decimal(12, 2)
  status      String // Paid, Processing, Pending
  paymentDate DateTime
}

model LeaveRequest {
  id         Int        @id @default(autoincrement())
  employeeId Int
  employee   Employee @relation(fields: [employeeId], references: [id])
  type       String // Sick, Annual, Personal
  startDate  DateTime
  endDate    DateTime
  reason     String
  status     String // Pending, Approved, Rejected
}

model Department {
  id          Int        @id @default(autoincrement())
  name        String     @unique
  description String
  employees   Employee[]
}

model Task {
  id        Int        @id @default(autoincrement())
  title      String
  assigneeId Int
  assignee   Employee @relation(fields: [assigneeId], references: [id])
  priority   String
  status     String
  dueDate    DateTime
}
